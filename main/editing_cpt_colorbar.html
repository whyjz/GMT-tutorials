
<!DOCTYPE html>

<html lang="zh_TW">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>14. 色階檔的編修與呈現 &#8212; GMT 教學手冊</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

 <link href='https://fonts.googleapis.com/css?family=Varela Round' rel='stylesheet'>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=5115cc725059bd94278eecd172e13a965bf8f5a9" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/tabs.css" />
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.2/css/all.min.css" />
    <link rel="stylesheet" type="text/css" href="../_static/style.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=9c920249402e914e316237a7dbc6769907cce411"></script>
    <script src="../_static/tabs.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script src="../_static/translations.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <link rel="canonical" href="https://gmt-tutorials.org/main/editing_cpt_colorbar.html" />
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="搜尋" href="../search.html" />
    <link rel="next" title="15. 3D 視圖" href="view3d.html" />
    <link rel="prev" title="13. 加入地圖元素" href="map_elements.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="zh_TW">
    

    <!-- Google Analytics -->
    
  </head>
 <script type="text/javascript">var _jf = _jf || [];_jf.push(['p','39630']);_jf.push(['_setFont','sourcehansans-tc-light','css','.sourcehansans-tc-light']);_jf.push(['_setFont','sourcehansans-tc-light','alias','sourcehansans-tc']);_jf.push(['_setFont','sourcehansans-tc-light','weight',200]);_jf.push(['_setFont','sourcehansans-tc-regular','css','.sourcehansans-tc-regular']);_jf.push(['_setFont','sourcehansans-tc-regular','alias','sourcehansans-tc']);_jf.push(['_setFont','sourcehansans-tc-regular','weight',400]);_jf.push(['_setFont','cwtexqyuan','css','.cwtexqyuan']);_jf.push(['_setFont','cwtexqyuan','alias','cwtexqyuan']);_jf.push(['_setFont','cwtexqyuan','weight',500]);_jf.push(['_setFont','xingothic-tc-w7','css','.xingothic-tc-w7']);_jf.push(['_setFont','xingothic-tc-w7','alias','xingothic-tc']);_jf.push(['_setFont','xingothic-tc-w7','weight',700]);_jf.push(['_setFont','jf-jinxuan-medium','css','.jf-jinxuan-medium']);_jf.push(['_setFont','jf-jinxuan-medium','alias','jf-jinxuan']);_jf.push(['_setFont','jf-jinxuan-medium','weight',600]);(function(f,q,c,h,e,i,r,d){var k=f._jf;if(k.constructor===Object){return}var l,t=q.getElementsByTagName("html")[0],a=function(u){for(var v in k){if(k[v][0]==u){if(false===k[v][1].call(k)){break}}}},j=/\S+/g,o=/[\t\r\n\f]/g,b=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,g="".trim,s=g&&!g.call("\uFEFF\xA0")?function(u){return u==null?"":g.call(u)}:function(u){return u==null?"":(u+"").replace(b,"")},m=function(y){var w,z,v,u,x=typeof y==="string"&&y;if(x){w=(y||"").match(j)||[];z=t[c]?(" "+t[c]+" ").replace(o," "):" ";if(z){u=0;while((v=w[u++])){if(z.indexOf(" "+v+" ")<0){z+=v+" "}}t[c]=s(z)}}},p=function(y){var w,z,v,u,x=arguments.length===0||typeof y==="string"&&y;if(x){w=(y||"").match(j)||[];z=t[c]?(" "+t[c]+" ").replace(o," "):"";if(z){u=0;while((v=w[u++])){while(z.indexOf(" "+v+" ")>=0){z=z.replace(" "+v+" "," ")}}t[c]=y?s(z):""}}},n;k.push(["_eventActived",function(){p(h);m(e)}]);k.push(["_eventInactived",function(){p(h);m(i)}]);k.addScript=n=function(u,A,w,C,E,B){E=E||function(){};B=B||function(){};var x=q.createElement("script"),z=q.getElementsByTagName("script")[0],v,y=false,D=function(){x.src="";x.onerror=x.onload=x.onreadystatechange=null;x.parentNode.removeChild(x);x=null;a("_eventInactived");B()};if(C){v=setTimeout(function(){D()},C)}x.type=A||"text/javascript";x.async=w;x.onload=x.onreadystatechange=function(G,F){if(!y&&(!x.readyState||/loaded|complete/.test(x.readyState))){y=true;if(C){clearTimeout(v)}x.src="";x.onerror=x.onload=x.onreadystatechange=null;x.parentNode.removeChild(x);x=null;if(!F){setTimeout(function(){E()},200)}}};x.onerror=function(H,G,F){if(C){clearTimeout(v)}D();return true};x.src=u;z.parentNode.insertBefore(x,z)};a("_eventPreload");m(h);n(r,"text/javascript",false,3000)})(this,this.document,"className","jf-loading","jf-active","jf-inactive","//ds.justfont.com/js/stable/v/5.0.2/id/166657211014");</script>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
      
      
      <h1 class="site-logo" id="site-title">GMT 教學手冊</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form> <div class="langcenter"> <nav class="menu"> <ul class="clearfix"> <li class="current-item"> <a href="#" class="clicker">中文 (台灣) <span class="arrow">&#9660;</span></a> <ul class="sub-menu"> <li><a href="editing_cpt_colorbar.html">中文 (台灣)</a></li> <li><a href="../en/main/editing_cpt_colorbar.html">English</a></li> </ul> </li> </ul> </nav> </div> 
<nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  入門與概述
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="intro_install.html">
   1. GMT / PyGMT 簡介與安裝
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="software.html">
   2. 推薦搭配的軟體或套件
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="basic_concept.html">
   3. 基本概念與名詞
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  基本繪圖技巧
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="making_first_map.html">
   4. 製作第一張地圖
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="coloring_topography.html">
   5. 為地形圖上色
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="pen_and_painting.html">
   6. 畫筆與調色技巧
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="scatter_plot.html">
   7. XY 點散佈圖
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  製作各種常見的地圖（基礎）
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="cpt_colormap.html">
   8. 使用色階表為網格資料著色
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="plot_vector_data.html">
   9. 繪製向量式資料
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="layout_design.html">
   10. 版面設計與地圖的幾何布局
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="hillshading.html">
   11. 暈渲地圖
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="contour_and_profile.html">
   12. 等高線地圖及地形剖面
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="map_elements.html">
   13. 加入地圖元素
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  製作各種常見的地圖（進階）
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   14. 色階檔的編修與呈現
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="view3d.html">
   15. 3D 視圖
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="focal_mech.html">
   16. 繪製震源機制解
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="draping.html">
   17. 在 3D 地形上覆蓋地圖
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  網格資料處理
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="raster_calculator.html">
   18. 網格計算機
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="basic_img_processing.html">
   19. 基本影像處理
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  數值資料處理
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="stat_histogram.html">
   20. 輸出統計資訊與直方圖
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="regression_basics.html">
   21. 進行迴歸分析
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  附錄與學習資源
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="data_credit.html">
   22. 資料來源與參考文獻
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="command_index.html">
   23. 指令索引
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="gallery.html">
   24. 章節地圖索引
  </a>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>
<a href="https://github.com/whyjz/GMT-tutorials"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="bottom"
title="Source repository"
>
  

<span class="headerbtn__icon-container">
  <i class="fab fa-github"></i>
  </span>

</a>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="../_sources/main/editing_cpt_colorbar.rst"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.rst</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id2">
   14.1. 目標
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id5">
   14.2. 使用的指令與概念
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id6">
   14.3. 前置作業
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id8">
   14.4. 操作流程
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id9">
   14.5. 指令稿
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id10">
   14.6. 習題
  </a>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>色階檔的編修與呈現</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id2">
   14.1. 目標
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id5">
   14.2. 使用的指令與概念
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id6">
   14.3. 前置作業
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id8">
   14.4. 操作流程
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id9">
   14.5. 指令稿
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id10">
   14.6. 習題
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <section id="id1">
<h1><span class="section-number">14. </span>色階檔的編修與呈現<a class="headerlink" href="#id1" title="本標題的永久連結">#</a></h1>
<p>在本章中，我們要深入的探討如何為資料量身打造最適合的色階檔。GMT
具有一些編修指令，讓我們不用在文字編輯器中編輯色階檔，但也能針對輸入的資料進行調整。另外，本章也會說明如何繪製色條 (Color Bar)，把色階一併畫到地圖上，讓地圖使用者能直接依靠地圖顯示的顏色來判定數值。</p>
<section id="id2">
<h2><span class="section-number">14.1. </span>目標<a class="headerlink" href="#id2" title="本標題的永久連結">#</a></h2>
<p>製作一張<a class="reference external" href="https://zh.wikipedia.org/wiki/%E6%A0%BC%E9%99%B5%E5%85%B0">格陵蘭</a>的基盤地形圖。格陵蘭大部分的土地都落在北極圈內，氣候寒冷，內陸地區長年被極厚的積雪與冰層覆蓋。這些厚冰層的重量實際上已經把格陵蘭的中心陸地壓陷了。在底下的地圖中，可以看出格陵蘭的「陸地」表面呈現外高內低的趨勢，內陸地區甚至已經達海平面之下數百公尺。為了與周圍水域區隔，我們要使用不同的色階來表示「被壓陷到海平面以下的陸地」與「海域地形」。</p>
<a class="reference external image-reference" href="_images/greenland.png" id="id4"><img alt="../_images/greenland_s.png" src="../_images/greenland_s.png" /></a>
<p>直接觀看<a class="reference internal" href="#id9">指令稿</a></p>
</section>
<section id="id5">
<h2><span class="section-number">14.2. </span>使用的指令與概念<a class="headerlink" href="#id5" title="本標題的永久連結">#</a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">grd2cpt</span></code> - <strong>使用網格檔的資訊建立色階檔</strong></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">psscale</span></code> - <strong>繪製色階條</strong></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">makecpt</span></code> - <strong>編修色階檔</strong></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pscoast</span></code> - <strong>沿著海岸線裁剪地圖</strong></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">grdinfo</span></code> - <strong>查閱網格檔的基本資訊</strong></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">grdimage</span></code> - <strong>繪製著色影像</strong></p></li>
<li><p>GMT 共用選項：<code class="docutils literal notranslate"><span class="pre">-V</span></code> <code class="docutils literal notranslate"><span class="pre">-B</span></code> <code class="docutils literal notranslate"><span class="pre">--長參數</span></code></p></li>
<li><p>色階檔的編修技巧</p></li>
<li><p>沿著海岸線剪掉影像</p></li>
<li><p>色階條的繪製與細節調整</p></li>
</ul>
</section>
<section id="id6">
<h2><span class="section-number">14.3. </span>前置作業<a class="headerlink" href="#id6" title="本標題的永久連結">#</a></h2>
<p>本章同樣使用 <a class="reference external" href="https://www.ngdc.noaa.gov/mgg/global/global.html">ETOPO</a> Bedrock 資料庫來繪製海底地形。有關 <a class="reference external" href="https://www.ngdc.noaa.gov/mgg/global/global.html">ETOPO</a> 的詳細說明，請參閱「<a class="reference internal" href="coloring_topography.html"><span class="doc">為地形圖上色</span></a>」。檔案可以在 <a class="reference external" href="https://www.ngdc.noaa.gov/mgg/global/global.html">ETOPO</a> 的網站下載 (ETOPO1 Bedrock -&gt;
grid-registered: netCDF)，或是使用如下快速連結下載：</p>
<p><a class="reference external" href="https://www.ngdc.noaa.gov/mgg/global/relief/ETOPO1/data/bedrock/grid_registered/netcdf/ETOPO1_Bed_g_gmt4.grd.gz">下載 ETOPO1 Bedrock netCDF 檔</a> (383M，解壓後約 891M)</p>
<p>本次的作圖區域有大半部份落在極圈內，如以下 <em>Google Earth</em> 截圖所示。在高緯度地區，<code class="docutils literal notranslate"><span class="pre">-R</span></code> 的作用方式會不太一樣，將於下段與圖片一同解說，但基本的 <code class="docutils literal notranslate"><span class="pre">-R</span></code> 參數概念，仍然可以參考「<a class="reference internal" href="making_first_map.html"><span class="doc">製作第一張地圖</span></a>」。</p>
<img alt="../_images/editing_cpt_colorbar_fig1.png" src="../_images/editing_cpt_colorbar_fig1.png" />
<p>另外，本教學還使用了兩個 <a class="reference external" href="http://soliton.vm.bytemark.co.uk/pub/cpt-city">cpt-city</a> 的色階檔，分別為 <code class="docutils literal notranslate"><span class="pre">mby</span></code> 和 <code class="docutils literal notranslate"><span class="pre">cequal</span></code>。你可以從<a class="reference external" href="http://soliton.vm.bytemark.co.uk/pub/cpt-city/mby/tn/mby.png.index.html">cpt-city 網頁</a>上下載，或是直接從以下連結取得：</p>
<p><a class="reference download internal" download="" href="../_downloads/007766d9b9a0d7b97261c74acddf85db/mby.cpt"><code class="xref download docutils literal notranslate"><span class="pre">mby.cpt</span></code></a></p>
<p><a class="reference download internal" download="" href="../_downloads/355543b323877f8d49cb14d60c28e6fa/cequal.cpt"><code class="xref download docutils literal notranslate"><span class="pre">cequal.cpt</span></code></a></p>
</section>
<section id="id8">
<h2><span class="section-number">14.4. </span>操作流程<a class="headerlink" href="#id8" title="本標題的永久連結">#</a></h2>
<p>我們先來畫畫看比較一般的地圖。由於格陵蘭地處高緯，使用麥卡托投影 (<code class="docutils literal notranslate"><span class="pre">-JM</span></code>) 會使此地區變形嚴重，因此我們繼續使用之前介紹的 <a class="reference external" href="https://zh.wikipedia.org/wiki/%E4%BA%9A%E5%B0%94%E5%8B%83%E6%96%AF%E6%8A%95%E5%BD%B1">Albers 投影</a>
(<code class="docutils literal notranslate"><span class="pre">-JB</span></code>)，使格陵蘭與其他地表的相對面積與實際大小一致。</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># ==== 設定變數 ====</span>
<span class="nv">in_grd</span><span class="o">=</span><span class="s1">&#39;ETOPO1_Bed_g_gmt4.grd&#39;</span>
<span class="nv">out_ps</span><span class="o">=</span><span class="s1">&#39;greenland.ps&#39;</span>
<span class="nv">cpt_sea</span><span class="o">=</span><span class="s1">&#39;mby.cpt&#39;</span>

<span class="c1"># ==== 繪製地形圖 ====</span>
grdimage <span class="nv">$in_grd</span> -R-60/57/20/80r -JB-42/76/90/60/4i -K -P -C<span class="nv">$cpt_sea</span> <span class="se">\</span>
         -Ba15g15 -BWSne &gt; <span class="nv">$out_ps</span>
pscoast          -R -J -O -Dh -W,black &gt;&gt; <span class="nv">$out_ps</span>
</pre></div>
</div>
<p>以上腳本出圖如下</p>
<a class="reference external image-reference" href="_images/editing_cpt_colorbar_fig2.png"><img alt="../_images/editing_cpt_colorbar_fig2_s.png" class="align-center" src="../_images/editing_cpt_colorbar_fig2_s.png" style="width: 556.5px; height: 741.3px;" /></a>
<p>值得注意的是，<code class="docutils literal notranslate"><span class="pre">-R座標r</span></code> 的語法規範的地圖左下角和右上角的經緯度為 <code class="docutils literal notranslate"><span class="pre">(-60,</span> <span class="pre">57)</span></code> 和
<code class="docutils literal notranslate"><span class="pre">(20,</span> <span class="pre">80)</span></code>，但因為地圖本身投影位置在高緯度的因素，實際顯示在地圖上的並不會是沿著 60W、20E、57N 和 80N 四條經緯線圍起來的範圍，例如地圖左上角的緯度大概已是 80W 了。事實上，如果上例中的 <code class="docutils literal notranslate"><span class="pre">-R</span></code> 參數改成 <code class="docutils literal notranslate"><span class="pre">-R-60/20/57/80</span></code>，地圖會根本無法產生。</p>
<div class="admonition attention">
<p class="admonition-title">注意</p>
<p>在以上所述的情況下，<code class="docutils literal notranslate"><span class="pre">grdimage</span></code> 還是可以執行成功，但嘗試開啟 <code class="docutils literal notranslate"><span class="pre">.ps</span></code> 檔時會出現如下錯誤：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>undefined -21
undefined -21
undefined -21
undefined -21
</pre></div>
</div>
<p>然後圖檔就會是一片空白。因此，在使用 <code class="docutils literal notranslate"><span class="pre">-R座標</span></code> 的語法時，請一定要<strong>確認地圖 (四條經緯線圍成的區域) 在選定的投影法下可以適當的投影</strong>，或是改使用 <code class="docutils literal notranslate"><span class="pre">-R座標r</span></code> 的語法，比較不會出現這類型的錯誤。</p>
</div>
<p>格陵蘭島在上一幅地圖中，很明顯地中間下凹了一塊。地圖使用海水的顏色標示所有低於海平面的高度，在一般的狀況中沒有問題，但是如果我們想表達中間那塊是「下凹至海平面以下的陸地」而不是海底地形的話，顏色就勢必要更改才行。要達成目標並不困難，只要「海洋使用一個色階檔著色，陸地部份則使用另一個色階檔著色」就行了。這時候，我們需要的是 <code class="docutils literal notranslate"><span class="pre">pscoast</span></code> 中一個特別的選項 <code class="docutils literal notranslate"><span class="pre">-G</span></code>。<code class="docutils literal notranslate"><span class="pre">-G</span></code> 一般的用法是在後面填上顏色來指定陸域的填色，不過它還有另一個功能，就是當語法為 <code class="docutils literal notranslate"><span class="pre">-Gc</span></code> 時，GMT 不會為陸域填色，而是會<strong>沿著海岸線把陸地部份的地圖剪掉</strong>。在下了 <code class="docutils literal notranslate"><span class="pre">pscoast</span> <span class="pre">-Gc</span></code> 之後，我們要再使用 <code class="docutils literal notranslate"><span class="pre">grdimage</span></code> 畫一次地圖，接著使用 <code class="docutils literal notranslate"><span class="pre">pscoast</span> <span class="pre">-Q</span></code> 指令，來「告訴」
GMT 剛才畫的地圖是用來填補剪下的陸地部份的。因此，腳本可以撰寫如下：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># ==== 設定變數 ====</span>
<span class="nv">in_grd</span><span class="o">=</span><span class="s1">&#39;ETOPO1_Bed_g_gmt4.grd&#39;</span>
<span class="nv">out_ps</span><span class="o">=</span><span class="s1">&#39;greenland.ps&#39;</span>
<span class="nv">cpt_sea</span><span class="o">=</span><span class="s1">&#39;mby.cpt&#39;</span>         <span class="c1"># 海域的色階</span>
<span class="nv">cpt_land</span><span class="o">=</span><span class="s1">&#39;cequal.cpt&#39;</span>     <span class="c1"># 陸域的色階</span>

<span class="c1"># ==== 繪製地形圖 ====</span>
    <span class="c1"># 畫第一次圖，使用海域色階</span>
grdimage <span class="nv">$in_grd</span> -R-60/57/20/80r -JB-42/76/90/60/4i -K -P -C<span class="nv">$cpt_sea</span> <span class="se">\</span>
         -Ba15g15 -BWSne &gt; <span class="nv">$out_ps</span>
    <span class="c1"># 沿著海岸線剪下 (-Gc) 前面影像的陸域部份 (以 -Dh 選擇海岸線精細度)</span>
pscoast          -R -J -O -K -Dh -Gc &gt;&gt; <span class="nv">$out_ps</span>
    <span class="c1"># 畫第二次圖，使用陸域色階，注意這裡需要 -B 選項來把邊框重新設定一次，</span>
    <span class="c1"># 這是因為格線和與陸地接觸到的邊框都會被剪掉</span>
grdimage <span class="nv">$in_grd</span> -R -J -O -K -C<span class="nv">$cpt_land</span> -B &gt;&gt; <span class="nv">$out_ps</span>
    <span class="c1"># 沿著海岸線貼上 (-Q) 從前一個 pscoast 指令之後產生的影像</span>
pscoast          -R -J -O -Q -B+t<span class="s2">&quot;Greenland Bedrock&quot;</span> &gt;&gt; <span class="nv">$out_ps</span>
</pre></div>
</div>
<p>由於我們使用的是兩個完全不同的色階檔，產生的影像會在陸域與海域有極大的顏色差異，如下圖所示。</p>
<a class="reference external image-reference" href="_images/editing_cpt_colorbar_fig3.png"><img alt="../_images/editing_cpt_colorbar_fig3_s.png" class="align-center" src="../_images/editing_cpt_colorbar_fig3_s.png" style="width: 536.9px; height: 750.4px;" /></a>
<div class="admonition tip">
<p class="admonition-title">小訣竅</p>
<p>以上的步驟也可以反過來操作，也就是先畫陸域部份，然後沿著海岸線剪掉海域部份，再貼上以第二種色階繪製的海域部份。具體來說，就是以 <code class="docutils literal notranslate"><span class="pre">pscoast</span></code> 的 <code class="docutils literal notranslate"><span class="pre">-Sc</span></code>
取代 <code class="docutils literal notranslate"><span class="pre">-Gc</span></code> ，然後再以 <code class="docutils literal notranslate"><span class="pre">-Q</span></code> 貼上新影像即可。</p>
</div>
<p>我們目前已經成功的把陸地部份換成另一個色階了，接下來要作的事，就是編修這個色階，讓它可以更漂亮的呈現在地圖上。因此，我們來試試以下目標：</p>
<ol class="arabic simple">
<li><p>在高於海平面的部份，採用 <code class="docutils literal notranslate"><span class="pre">mby</span></code> 色階檔的 z &gt; 0 部份的顏色</p></li>
<li><p>在地於海平面的部份，採用 <code class="docutils literal notranslate"><span class="pre">cequal</span></code> 色階檔的 90 &lt; z &lt; 190 部份的顏色</p></li>
</ol>
<figure class="align-center" id="id11">
<img alt="../_images/editing_cpt_colorbar_fig4.png" src="../_images/editing_cpt_colorbar_fig4.png" />
<figcaption>
<p><span class="caption-number">圖 14.1 </span><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">cequal.cpt</span></code> 的色階表。90 &lt; z &lt; 190 的位置大概介於藍紫色至黃色之間。</span><a class="headerlink" href="#id11" title="本圖片的永久連結">#</a></p>
</figcaption>
</figure>
<p>在 GMT 中與編修色階檔有關的指令，除了 <code class="docutils literal notranslate"><span class="pre">makecpt</span></code> 之外，還有一個稱為 <code class="docutils literal notranslate"><span class="pre">grd2cpt</span></code> 的功能，前者可以簡單的給定 z 值以製作色階檔，而後者則是<strong>依據輸入的網格檔數值，自動調整輸出色階檔的 z 值區間</strong>。我們可以使用如下指令來測試一下他的功能：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ grd2cpt <span class="nv">$in_grd</span> -Ccequal.cpt    <span class="c1"># $in_grd 已設為 &#39;ETOPO1_Bed_g_gmt4.grd&#39;</span>
</pre></div>
</div>
<p>程式可能會需要跑一陣子，因為它會逐一讀取網格檔中的所有數值。程式結束時輸出的訊息大概會像這樣：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>-10898              <span class="m">1</span>               -5133.54194385  <span class="m">1</span>
-5133.54194385      <span class="m">1</span>/40/43         -4096.56238785  <span class="m">1</span>/40/43
-4096.56238785      <span class="m">1</span>/115/158       -3348.82717077  <span class="m">1</span>/115/158
-3348.82717077      <span class="m">83</span>/111/235      -2709.9149979   <span class="m">83</span>/111/235
-2709.9149979       <span class="m">154</span>/1/247       -2112.73915566  <span class="m">154</span>/1/247
-2112.73915566      <span class="m">209</span>/65/164      -1515.56331342  <span class="m">209</span>/65/164
-1515.56331342      <span class="m">242</span>/132/65      -876.651140552  <span class="m">242</span>/132/65
-876.651140552      <span class="m">254</span>/212/1       -128.915923474  <span class="m">254</span>/212/1
-128.915923474      <span class="m">254</span>/250/182     <span class="m">908</span>.063632524   <span class="m">254</span>/250/182
<span class="m">908</span>.063632524       <span class="m">254</span>             <span class="m">8271</span>            <span class="m">254</span>
B   black
F   white
N   red
</pre></div>
</div>
<p>從以上的輸出中可知 <code class="docutils literal notranslate"><span class="pre">grd2cpt</span></code> 的輸出和 <code class="docutils literal notranslate"><span class="pre">makecpt</span></code> 一樣，都是色階檔的文字訊息。有關色階檔內容所代表的意義，請參考「<a class="reference internal" href="pen_and_painting.html"><span class="doc">畫筆與調色技巧</span></a>」。在新的色階檔中，z 的最小值和最大值已接近地表海拔的最低點和最高點，顯示 <code class="docutils literal notranslate"><span class="pre">grd2cpt</span></code> 會使用網格檔的最小值和最大值當作 z 值的邊界。另外，我們也會發現顏色的 z 值間距在不同高度時都不一樣，例如 z 從 -10898 到 -5133 是一個顏色 (寬度 5765)，而 -5133 到 -4096 是另一個顏色 (寬度只剩 1137)。這是由於在 <code class="docutils literal notranslate"><span class="pre">grd2cpt</span></code> 的預設選項中，是<strong>使用網格檔 z 值的「累積分佈函數」(CDF) 當作區間的端點</strong>。在以上的例子中，色階檔分成了 10 個區間，網格檔落於每個區間的像素佔全體像素的比例都是 10%。這種設置會讓指定的 10 種顏色在輸出的圖中佔有相同面積，以達到美化地圖的效果。當然，如果你想要固定區間或是其他色階分割方法，<code class="docutils literal notranslate"><span class="pre">grd2cpt</span></code> 都有選項可以做到。</p>
<div class="admonition note">
<p class="admonition-title">備註</p>
<p><code class="docutils literal notranslate"><span class="pre">grd2cpt</span></code> 在 z 值區間上是用 CDF 來分隔，不過在顏色的選擇上則是線性的。也就是說，這 10 個區間的顏色，
只是簡單的把 <code class="docutils literal notranslate"><span class="pre">cequal.cpt</span></code> 的 z 值範圍均分成 10 等分後，再內插求出的顏色。</p>
</div>
<p>要達到我們剛才設定的目標，得透過至少兩行指令來達成。因為色階檔的描述順序是把 z 值從小排到大，所以我們應該要先處理第二項目標，也就是 <strong>先製作低於海平面的色階檔</strong>。由於我們不知道格陵蘭的岩石基盤到底有多深，使用 <code class="docutils literal notranslate"><span class="pre">grd2cpt</span></code>
來指定 z 值，會稍微方便一點。再加上其他的選項後，指令會像是這樣：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ grd2cpt <span class="nv">$in_grd</span> -Ccequal.cpt -R-52/67/-30/80r -L-650/0 -G90/190 -Z -V -N
    <span class="c1"># -R: 指定計算區域 (經緯度)</span>
    <span class="c1"># -L: 只產生 z 值落於 -650 到 0 之間的色階，而且在計算 CDF 時，也忽略這個區間以外的部份</span>
    <span class="c1"># -G: 只使用輸入色階檔中 z 值從 90 到 190 之間的顏色</span>
    <span class="c1"># -Z: 製作連續色階檔 (與 makecpt 相同)</span>
    <span class="c1"># -V: 絮叨模式</span>
    <span class="c1"># -N: 不產生最後三行 (B、F 與 N)</span>
</pre></div>
</div>
<p>這邊值得一提的是，<code class="docutils literal notranslate"><span class="pre">-V</span></code> 幾乎是所有 GMT 共有的選項。一旦加上了這個選項，在螢幕上的輸出資訊會比平常的還要多，因此稱為「<strong>絮叨模式</strong>」。在絮叨模式開啟時會輸出包括程式目前的執行進度、額外的輔助資訊等等，在腳本中使用時能讓查閱結果與除錯更為方便。以上的指令會輸出如下色階檔：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>grd2cpt: Processing input grid<span class="o">(</span>s<span class="o">)</span>
grd2cpt: Mean and S.D. of data are -103.258494991 <span class="m">80</span>.4274398244
grd2cpt: Warning: Making a continuous cpt from a discrete cpt may give unexpected results!
-650        <span class="m">87</span>/111/238      -206.330406411  <span class="m">120</span>/84/254
-206.330406411      <span class="m">120</span>/84/254      -170.947936109  <span class="m">139</span>/22/254
-170.947936109      <span class="m">139</span>/22/254      -145.434685671  <span class="m">169</span>/1/237
-145.434685671      <span class="m">169</span>/1/237       -123.634553883  <span class="m">177</span>/7/215
-123.634553883      <span class="m">180</span>/12/210      -103.258494991  <span class="m">206</span>/61/169
-103.258494991      <span class="m">206</span>/61/169      -82.8824360992  <span class="m">226</span>/96/130
-82.8824360992      <span class="m">226</span>/96/130      -61.0823043116  <span class="m">235</span>/111/106
-61.0823043116      <span class="m">236</span>/113/104     -35.5690538732  <span class="m">247</span>/146/40
-35.5690538732      <span class="m">247</span>/146/40      -0.186583571607 <span class="m">254</span>/178/1
-0.186583571607     <span class="m">254</span>/182/1       <span class="m">0</span>       <span class="m">254</span>/219/1
</pre></div>
</div>
<p>前兩行是 <code class="docutils literal notranslate"><span class="pre">-V</span></code> 開啟時會出現的資訊，簡單說明現在進度、資料的平均值與分佈。而在開啟 <code class="docutils literal notranslate"><span class="pre">-Z</span></code> 選項時，如果原本的色階檔不是連續色階，就會出現第三行的警告，不過這裡我們可以忽略它。從第四行開始，就是色階檔。請注意 z 的最大/最小值和色階的顏色範圍都和原本的不同，而且最後三行也不是 B、F 與 N。你也可以嘗試自行調整所有相關的選項與設定，看看輸出會有什麼變化。最後，我們一樣可以使用重導向符號 <code class="docutils literal notranslate"><span class="pre">&gt;</span></code> 把色階資訊轉存成 <code class="docutils literal notranslate"><span class="pre">.cpt</span></code> 格式的色階檔：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ <span class="nv">cpt_land</span><span class="o">=</span><span class="s1">&#39;greenland.cpt&#39;</span>
$ grd2cpt <span class="nv">$in_grd</span> -Ccequal.cpt -R-52/67/-30/80r -L-650/0 -G90/190 <span class="se">\</span>
          -Z -V -N &gt; <span class="nv">$cpt_land</span>
</pre></div>
</div>
<p>請放心，前面三行的提示與警告是不會輸入到檔案中的。如此一來，我們想要的「海平面以下的色階檔」就做好了！</p>
<div class="admonition note">
<p class="admonition-title">備註</p>
<p>精確的說，<code class="docutils literal notranslate"><span class="pre">-V</span></code> 添加的額外資訊和警告都是放在「標準錯誤輸出」(stderr) 中，所以不管開啟與否，重導向符號 <code class="docutils literal notranslate"><span class="pre">&gt;</span></code> 都不會把這些資訊轉存到檔案中。有關於如何把標準錯誤輸出重導向到另一個檔案，請參閱 Linux 相關書籍。</p>
</div>
<p>接下來的目標是水面上的色階檔。我們要截切 <code class="docutils literal notranslate"><span class="pre">mby.cpt</span></code> 的一部分過來當作新色階檔的下半部，只要運用
<code class="docutils literal notranslate"><span class="pre">makecpt</span></code> 指令即可：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ <span class="nv">cpt_sea</span><span class="o">=</span><span class="s1">&#39;mby.cpt&#39;</span>
$ makecpt -C<span class="nv">$cpt_sea</span> -G0/4000 -Z -M &gt;&gt; <span class="nv">$cpt_land</span>
</pre></div>
</div>
<p>完成的陸域色階檔 <code class="docutils literal notranslate"><span class="pre">greenland.cpt</span></code> 的內容就會像下面這樣</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>-650                <span class="m">87</span>/111/238      -206.330406411  <span class="m">120</span>/84/254
-206.330406411      <span class="m">120</span>/84/254      -170.947936109  <span class="m">139</span>/22/254
-170.947936109      <span class="m">139</span>/22/254      -145.434685671  <span class="m">169</span>/1/237
-145.434685671      <span class="m">169</span>/1/237       -123.634553883  <span class="m">177</span>/7/215
-123.634553883      <span class="m">180</span>/12/210      -103.258494991  <span class="m">206</span>/61/169
-103.258494991      <span class="m">206</span>/61/169      -82.8824360992  <span class="m">226</span>/96/130
-82.8824360992      <span class="m">226</span>/96/130      -61.0823043116  <span class="m">235</span>/111/106
-61.0823043116      <span class="m">236</span>/113/104     -35.5690538732  <span class="m">247</span>/146/40
-35.5690538732      <span class="m">247</span>/146/40      -0.186583571607 <span class="m">254</span>/178/1
-0.186583571607     <span class="m">254</span>/182/1       <span class="m">0</span>               <span class="m">254</span>/219/1
<span class="m">0</span>                   <span class="m">0</span>/97/71         <span class="m">50</span>              <span class="m">16</span>/123/48
<span class="m">50</span>                  <span class="m">16</span>/123/48       <span class="m">500</span>             <span class="m">232</span>/214/125
<span class="m">500</span>                 <span class="m">232</span>/214/125     <span class="m">1200</span>            <span class="m">163</span>/68/0
<span class="m">1200</span>                <span class="m">163</span>/68/0        <span class="m">1800</span>            <span class="m">130</span>/30/30
<span class="m">1800</span>                <span class="m">130</span>/30/30       <span class="m">2800</span>            gray63
<span class="m">2800</span>                gray63          <span class="m">4000</span>            <span class="m">206</span>
B   black
F   white
N   <span class="m">127</span>.5
</pre></div>
</div>
<p>看起來相當不錯！不過有一個小問題：我們的色階 z 值最低只到 -650，這個值是我們自己設定的，事實上在格陵蘭的某些區域，基盤海拔比 -650 還低，依照上面的色階定義，這些區域會顯示為黑色。在這種狀況下，我們一般會使用與最低的色階相同或接近的顏色，來表達比最低的色階還低的像素值。你當然可以手動編輯色階檔中代表背景色的 <code class="docutils literal notranslate"><span class="pre">B</span>&#160;&#160; <span class="pre">black</span></code> 的那一行，不過事實上 GMT 也提供了指令，讓使用者可以指定B、F 與 N 的顏色。例如在我們的狀況下，要使用 <code class="docutils literal notranslate"><span class="pre">--COLOR_BACKGROUND</span></code> 這個選項。它是所謂的「長指令」，語法上與 <code class="docutils literal notranslate"><span class="pre">-R</span></code>、<code class="docutils literal notranslate"><span class="pre">-Z</span></code> 等等的「短指令」不同，要用如下的方式給定參數：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ 某GMT指令 --長指令名稱<span class="o">=</span>長指令參數 ... <span class="c1"># 和短指令一樣，可以無限增加</span>
</pre></div>
</div>
<p>因此，如果我們想在原本的 <code class="docutils literal notranslate"><span class="pre">makecpt</span></code> 中加上這個選項，指定與 z = -650 時相同的顏色，製作 <code class="docutils literal notranslate"><span class="pre">greenland.cpt</span></code>
的兩步驟語法可以寫成：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ grd2cpt <span class="nv">$in_grd</span> -Ccequal.cpt -R-52/67/-30/80r -L-650/0 -G90/190 -Z -V -N &gt; <span class="nv">$cpt_land</span>
$ makecpt -C<span class="nv">$cpt_sea</span> -G0/4000 -Z -M --COLOR_BACKGROUND<span class="o">=</span><span class="m">82</span>/106/233 &gt;&gt; <span class="nv">$cpt_land</span>
</pre></div>
</div>
<p>如此一來，<code class="docutils literal notranslate"><span class="pre">B</span>&#160;&#160; <span class="pre">black</span></code> 這一行就會變成 <code class="docutils literal notranslate"><span class="pre">B</span>&#160;&#160; <span class="pre">82/106/233</span></code>，我們的陸域色階檔也大功告成！這個色階檔就是本章
目標地圖的陸域色階檔。</p>
<div class="admonition tip">
<p class="admonition-title">小訣竅</p>
<p>如果你想更動的顏色是 F (前景色) 或 N (無資料顏色)，則可以使用 <code class="docutils literal notranslate"><span class="pre">--COLOR_FOREGROUND</span></code> 或
<code class="docutils literal notranslate"><span class="pre">--COLOR_NAN</span></code> 的長指令來設定。</p>
</div>
<div class="admonition note">
<p class="admonition-title">備註</p>
<p>有關於長指令的進一步說明，以及它們與 <code class="docutils literal notranslate"><span class="pre">gmtdefaults</span></code> 和 <code class="docutils literal notranslate"><span class="pre">gmtset</span></code> 的關係，請參閱<strong>之後的章節</strong>。</p>
</div>
<p>我們現在已經有了精心製作的色階檔，不過如果要讓讀者理解這些顏色所代表的意義，還得在圖中放上「色階條」才行。所謂的色階條，就是在我們的目標地圖右側的東西，你可以利用它們找到地圖上每個顏色代表的數值或意義。在 GMT 中，能幫助我們繪製色階條的指令為 <code class="docutils literal notranslate"><span class="pre">psscale</span></code>，它的語法大概是</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ psscale -C色階檔 -D位置與長寬 -B邊框與標記 -其他選項
</pre></div>
</div>
<p>最重要的三個選項分別是 <code class="docutils literal notranslate"><span class="pre">-C</span></code>、<code class="docutils literal notranslate"><span class="pre">-D</span></code> 與 <code class="docutils literal notranslate"><span class="pre">-B</span></code>，而且 <code class="docutils literal notranslate"><span class="pre">-C</span></code> 的功用與大部分色階相關的指令的 <code class="docutils literal notranslate"><span class="pre">-C</span></code>
指令一樣，都是「輸入色階檔」，<code class="docutils literal notranslate"><span class="pre">-B</span></code> 則與幾乎所有的 GMT 的 <code class="docutils literal notranslate"><span class="pre">-B</span></code> 相同，不過語法上有一點點限制。因此，
只有 <code class="docutils literal notranslate"><span class="pre">-D</span></code> 需要特別介紹一下。<code class="docutils literal notranslate"><span class="pre">-D</span></code> 需要四個參數，分別是</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>-Dx軸座標/y軸座標/色條長度/色條寬度<span class="o">[</span>h<span class="o">]</span>
</pre></div>
</div>
<p>最後的 <code class="docutils literal notranslate"><span class="pre">[h]</span></code> 意指 <code class="docutils literal notranslate"><span class="pre">h</span></code> 可加可不加，不加 <code class="docutils literal notranslate"><span class="pre">h</span></code> 時畫的會是垂直色階條，加上 <code class="docutils literal notranslate"><span class="pre">h</span></code> 時畫的會是水平色階條。前兩個選項是色階條中心與頁面左下角 (座標原點) 的水平與垂直距離。注意這裡的「左下角」不是指「紙張」的左下角邊緣，而是「繪圖區」的左下角。紙張與繪圖區的關係，就好比於在 <em>Microsoft Word</em> 中，紙張與可以輸入文字的區塊關係一樣，通常後者會比前者略小一點，就能在版面四周留白以增進美觀。我們來實際繪製一個色階條顯示 <code class="docutils literal notranslate"><span class="pre">mby.cpt</span></code> 這個色階檔，就能掌握這些尺寸到底可以控制哪些東西的位置：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ psscale -Cmby.cpt -D8c/15c/20c/3c -P &gt; scalebar.ps
</pre></div>
</div>
<p>在以上指令中，給定了 (x, y) 為 (8cm, 15cm)，(長，寬) 則為 (20cm, 3cm)。相對應的數值大小，就如下圖所示。請注意 (x, y)
的原點位置位於左下角，但是並未對準紙張邊緣。另外，(x, y) 指到的位置位於色階條的正中心，因此不管旁邊的文字是什麼，只要這四個參數不變，色階條的位置與尺寸就不變。</p>
<a class="reference internal image-reference" href="../_images/editing_cpt_colorbar_fig5.png"><img alt="../_images/editing_cpt_colorbar_fig5.png" class="align-center" src="../_images/editing_cpt_colorbar_fig5.png" style="width: 373.5px; height: 528.6px;" /></a>
<div class="admonition note">
<p class="admonition-title">備註</p>
<p>有關於版面配置的進一步說明與設定技巧，請參閱<strong>之後的章節</strong>。</p>
</div>
<p><code class="docutils literal notranslate"><span class="pre">-B</span></code> 選項在之前的教學中，都是用來同時調整 X 軸和 Y 軸的座標顯示模式，在色階條中，只有 X 軸 (長的方向) 會顯示座標，Y 軸 (寬的方向) 除了放文字說明之外，不能顯示任何東西。因此在 <code class="docutils literal notranslate"><span class="pre">psscale</span></code> 中如要設定 <code class="docutils literal notranslate"><span class="pre">-B</span></code> 選項，建議是把 X 軸與 Y 軸分開設定。語法非常類似「<a class="reference internal" href="making_first_map.html"><span class="doc">製作第一張地圖</span></a>」中的介紹，不過要在 <code class="docutils literal notranslate"><span class="pre">-B</span></code> 之後多填上 <code class="docutils literal notranslate"><span class="pre">x</span></code> 或 <code class="docutils literal notranslate"><span class="pre">y</span></code>
指定座標軸。<code class="docutils literal notranslate"><span class="pre">+t</span></code> 設定標題的功能也無法使用；相對的，要用 <code class="docutils literal notranslate"><span class="pre">+l</span></code> 來設定座標軸標籤。整體來說，給定方法大致上就像這樣：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>-Bx<span class="o">[</span>afg設定<span class="o">][</span>+l座標軸標籤<span class="o">]</span> <span class="o">[</span>-By+l座標軸標籤<span class="o">]</span>
</pre></div>
</div>
<p>來看看以下這個例子，為了方便閱讀，我們使用水平色階條呈現：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ psscale -Cmby.cpt -D7c/2c/13c/2ch -P -Bxa2000f+lHeight -By+lm &gt; scalebar.ps
<span class="c1"># 這次的色階條長 13 公分，寬 (高) 2 公分</span>
<span class="c1"># 預設的紙張尺寸 (A4) 是 21.0 x 29.7 公分，所以我們要稍微縮小一點以塞進紙張的短邊</span>
<span class="c1"># x 座標軸標籤是 Height</span>
<span class="c1"># y 座標軸標籤是 m</span>
</pre></div>
</div>
<p>成品如下，x 座標軸標籤會被拿來當作色階條的說明，y 座標軸標籤則很適合拿來當作數值的單位。
<code class="docutils literal notranslate"><span class="pre">a2000f</span></code> 的效果就和在前幾章展示的圖片相同。</p>
<a class="reference internal image-reference" href="../_images/editing_cpt_colorbar_fig6.png"><img alt="../_images/editing_cpt_colorbar_fig6.png" class="align-center" src="../_images/editing_cpt_colorbar_fig6.png" style="width: 755.65px; height: 212.45px;" /></a>
<p>這裡還有另外一個例子，展示了更多的選項：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ psscale -Cmby.cpt -D7c/2c/13c/2ch -P <span class="se">\</span>
$         -Bxa1000f+l<span class="s2">&quot;Bathymetry (m)&quot;</span> -G-6000/0 -A -I1 &gt; scalebar.ps
<span class="c1"># 如果座標軸標籤中包含空格，要用雙引號把所有的字串括起來，這樣子才會被 +l 正確解讀</span>
<span class="c1"># -G: 只使用輸入色階檔中 z 值從 -6000 到 0 之間的顏色</span>
<span class="c1"># -A: 把 x 座標軸標籤擺到另外一側 (水平的話是上面，垂直的話是左側)</span>
<span class="c1"># -I: 設定色階條的照明光強度，參數數值越高越強，加上這個選項之後，色階條會出現明暗與陰影</span>
</pre></div>
</div>
<p>以下圖片就是此指令的輸出，注意色階條的上半部出現了照明光：</p>
<a class="reference internal image-reference" href="../_images/editing_cpt_colorbar_fig7.png"><img alt="../_images/editing_cpt_colorbar_fig7.png" class="align-center" src="../_images/editing_cpt_colorbar_fig7.png" style="width: 639.8px; height: 181.64999999999998px;" /></a>
<p>在第三個例子中，我們來看看要怎麼把色階檔中 B 和 F 指定的顏色也標上去：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ psscale -Cmby.cpt -D7c/2c/13c/2ch -P <span class="se">\</span>
$         -Bxa1000f+lLand -By+lm -G0/NaN -Ef1c &gt; scalebar.ps
<span class="c1"># -G: 如果數值是 NaN，代表使用色階檔中的最大值</span>
<span class="c1"># -E: 在色階條的兩側繪製三角形，顏色為 B 或 F 的顏色，高度為 1cm。</span>
<span class="c1">#     -Ef 只會畫出 F 那端的顏色，而 -Eb 只會畫出 B 那端的顏色。</span>
</pre></div>
</div>
<p>使用 <code class="docutils literal notranslate"><span class="pre">-E</span></code> 選項，在色階條的側邊就會出現三角形，如下所示。</p>
<a class="reference internal image-reference" href="../_images/editing_cpt_colorbar_fig8.png"><img alt="../_images/editing_cpt_colorbar_fig8.png" class="align-center" src="../_images/editing_cpt_colorbar_fig8.png" style="width: 684.9499999999999px; height: 172.54999999999998px;" /></a>
<p>運用以上介紹的選項與語法，我們可以把我們的色階分成三段來繪製：</p>
<ol class="arabic simple">
<li><p>繪製海平面以上的色階條</p></li>
<li><p>繪製海平面以下，海域的色階條</p></li>
<li><p>繪製海平面以下，陸域的色階條</p></li>
</ol>
<p>只要稍微先描個草稿，計算色階條各自之間的距離與寬度，把三條色階互相對齊就不是難事。試試看你能不能找出在最終指令稿的三個 <code class="docutils literal notranslate"><span class="pre">psscale</span></code> 指令中，哪一個對應以上哪一段，並且被放在地圖上的哪裡？</p>
</section>
<section id="id9">
<h2><span class="section-number">14.5. </span>指令稿<a class="headerlink" href="#id9" title="本標題的永久連結">#</a></h2>
<p>本地圖的最終指令稿如下：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># ==== 設定變數 ====</span>
<span class="nv">in_grd</span><span class="o">=</span><span class="s1">&#39;ETOPO1_Bed_g_gmt4.grd&#39;</span>
<span class="nv">out_ps</span><span class="o">=</span><span class="s1">&#39;greenland.ps&#39;</span>
<span class="nv">cpt_sea</span><span class="o">=</span><span class="s1">&#39;mby.cpt&#39;</span>                <span class="c1"># 海床的 cpt 檔</span>
<span class="nv">cpt_land</span><span class="o">=</span><span class="s1">&#39;greenland.cpt&#39;</span>         <span class="c1"># 陸域的 cpt 檔</span>

<span class="c1"># ==== 製作陸域的 cpt 檔 ====</span>
    <span class="c1"># 水面下的部份</span>
grd2cpt <span class="nv">$in_grd</span> -Ccequal.cpt -R-52/67/-30/80r -L-650/0 -G90/190 <span class="se">\</span>
        -Z -V -N &gt; <span class="nv">$cpt_land</span>
    <span class="c1"># 水面上的部份</span>
makecpt -C<span class="nv">$cpt_sea</span> -G0/4000 -Z -M <span class="se">\</span>
        --COLOR_BACKGROUND<span class="o">=</span><span class="m">82</span>/106/233 &gt;&gt; <span class="nv">$cpt_land</span>

<span class="c1"># ==== 繪製地形圖 ====</span>
grdimage <span class="nv">$in_grd</span> -R-60/57/20/80r -JB-42/76/90/60/4i -K -P -C<span class="nv">$cpt_sea</span> <span class="se">\</span>
         -Ba15g15 -BWSne &gt; <span class="nv">$out_ps</span>
    <span class="c1"># 把以上影像的陸域部份剪掉</span>
pscoast          -R -J -O -K -Dh -Gc &gt;&gt; <span class="nv">$out_ps</span>
grdimage <span class="nv">$in_grd</span> -R -J -O -K -C<span class="nv">$cpt_land</span> -B &gt;&gt; <span class="nv">$out_ps</span>
    <span class="c1"># 使用以上影像，回填被剪掉的部份</span>
pscoast          -R -J -O -K -Q -B+t<span class="s2">&quot;Greenland Bedrock&quot;</span> &gt;&gt; <span class="nv">$out_ps</span>

<span class="c1"># ==== 繪製數值色條 ====</span>
psscale -O -K -C<span class="nv">$cpt_sea</span>  -D5.35i/4.5i/1.75i/0.3i -G0/3500 <span class="se">\</span>
        -Bxa1000f+l<span class="s2">&quot;Above Sea Level&quot;</span> -By+lm &gt;&gt; <span class="nv">$out_ps</span>
psscale -O -K -C<span class="nv">$cpt_sea</span>  -D5.1i/1.9i/3i/0.3i     -G-6000/0 -A -I0.5 <span class="se">\</span>
        -Bxa1000f+lBathymetry &gt;&gt; <span class="nv">$out_ps</span>
psscale -O    -C<span class="nv">$cpt_land</span> -D5.6i/2.9i/1i/0.3i     -GNaN/0      -I0.5 <span class="se">\</span>
        -Bxa600f+lBedrock -Eb0.1i &gt;&gt; <span class="nv">$out_ps</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">備註</p>
<p>「繪製格陵蘭的基盤地形圖：使用 <code class="docutils literal notranslate"><span class="pre">ETOPO1</span> <span class="pre">Bedrock</span></code> 資料，輔以 Albers 圓錐投影。地圖使用兩套色階檔，分別用於陸域與海域的地形繪製。色階檔使用 <code class="docutils literal notranslate"><span class="pre">grd2cpt</span></code> 和 <code class="docutils literal notranslate"><span class="pre">makecpt</span></code>
編修，然後使用 <code class="docutils literal notranslate"><span class="pre">pscoast</span></code> 剪下與合併兩個不同的色階檔繪製的地形圖。最後在地圖的左側標上色階條，使讀者知道顏色所代表的意義。」</p>
<p>注意 <code class="docutils literal notranslate"><span class="pre">Bathymetry</span></code> (海床) 與 <code class="docutils literal notranslate"><span class="pre">Bedrock</span></code> (基盤岩) 的色階條高度與 z 值是不成比例的，這是因為我們要顯示 <code class="docutils literal notranslate"><span class="pre">Bedrock</span></code> 在 0 到 -100 公尺之間的過渡變化。如要調整成同比例，只需要改動 <code class="docutils literal notranslate"><span class="pre">psscale</span></code>
中的 <code class="docutils literal notranslate"><span class="pre">-D</span></code> 選項即可。</p>
</div>
<p>觀看<a class="reference internal" href="#id4">最終版地圖</a></p>
</section>
<section id="id10">
<h2><span class="section-number">14.6. </span>習題<a class="headerlink" href="#id10" title="本標題的永久連結">#</a></h2>
<ol class="arabic simple">
<li><p>使用 <code class="docutils literal notranslate"><span class="pre">makecpt</span></code> 或 <code class="docutils literal notranslate"><span class="pre">grd2cpt</span></code> 製作色階檔，繪製冰島 (<em>Iceland</em>) 的地形圖，並且在地圖右側標上垂直色階條。</p></li>
<li><p>繪製一張死海 (<em>Dead Sea</em>) 區域的周圍地形圖，並利用地圖說明死海周圍哪些地區是「低於海平面的陸地」。死海位於以色列、巴勒斯坦和約旦的交界，湖水鹽度極高而成為知名的觀光勝地，但近年來卻飽受附近地區過度使用水資源的影響，導致湖水面面積逐年縮減。</p></li>
</ol>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./main"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="map_elements.html" title="上一頁 頁">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">上一頁</p>
            <p class="prev-next-title"><span class="section-number">13. </span>加入地圖元素</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="view3d.html" title="下一頁 頁">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">下一頁</p>
        <p class="prev-next-title"><span class="section-number">15. </span>3D 視圖</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
 <div id="disqus_thread"></div> <script> var disqus_config = function () {this.page.url = 'http://gmt-tutorial.org/editing_cpt_colorbar.html'; this.page.identifier = 'editing_cpt_colorbar'; }; (function() { var d = document, s = d.createElement('script'); s.src = '//gmt-tutorials.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); </script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By <a href="https://whyjz.github.io/">鄭懷傑 (Whyjay Zheng)</a> | <a href="https://twitter.com/WhyjayZ"><i class="fa-brands fa-twitter"></i></a><br/>
  
    Last updated on 7月 27, 2022.<br/>
    <div class="extra_footer">
      &copy; 2016-2022. <a href="https://github.com/whyjz/GMT-tutorials/blob/master/LICENSE.md">MIT</a> 
and <a href="http://creativecommons.org/licenses/by/4.0/">CC-BY-4.0</a> dual licensed. <br>
Found this tutorial helpful? <a href="https://www.paypal.com/donate?hosted_button_id=68GZNRJ3MZDBE">Buy me a milktea!</a>

    </div>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>